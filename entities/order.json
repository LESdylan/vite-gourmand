{
  "name": "Order",
  "type": "object",
  "properties": {
    "user_id": {
      "type": "string",
      "description": "ID de l'utilisateur"
    },
    "user_email": {
      "type": "string",
      "description": "Email du client"
    },
    "user_name": {
      "type": "string",
      "description": "Nom complet du client"
    },
    "user_phone": {
      "type": "string",
      "description": "T\u00e9l\u00e9phone du client"
    },
    "menu_id": {
      "type": "string",
      "description": "ID du menu command\u00e9"
    },
    "menu_title": {
      "type": "string",
      "description": "Titre du menu command\u00e9"
    },
    "num_persons": {
      "type": "number",
      "description": "Nombre de personnes"
    },
    "delivery_address": {
      "type": "string",
      "description": "Adresse de livraison"
    },
    "delivery_city": {
      "type": "string",
      "description": "Ville de livraison"
    },
    "delivery_date": {
      "type": "string",
      "format": "date",
      "description": "Date de livraison"
    },
    "delivery_time": {
      "type": "string",
      "description": "Heure de livraison souhait\u00e9e"
    },
    "distance_km": {
      "type": "number",
      "description": "Distance en km depuis Bordeaux"
    },
    "menu_price": {
      "type": "number",
      "description": "Prix du menu"
    },
    "delivery_price": {
      "type": "number",
      "description": "Frais de livraison"
    },
    "discount_applied": {
      "type": "number",
      "description": "R\u00e9duction appliqu\u00e9e (en euros)"
    },
    "total_price": {
      "type": "number",
      "description": "Prix total"
    },
    "status": {
      "type": "string",
      "enum": [
        "en_attente",
        "acceptee",
        "en_preparation",
        "en_livraison",
        "livree",
        "attente_materiel",
        "terminee",
        "annulee"
      ],
      "default": "en_attente",
      "description": "Statut de la commande"
    },
    "status_history": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          },
          "date": {
            "type": "string"
          },
          "comment": {
            "type": "string"
          }
        }
      },
      "description": "Historique des statuts"
    },
    "cancellation_reason": {
      "type": "string",
      "description": "Motif d'annulation"
    },
    "cancellation_contact_method": {
      "type": "string",
      "enum": [
        "telephone",
        "email"
      ],
      "description": "Mode de contact pour annulation"
    },
    "has_equipment_loan": {
      "type": "boolean",
      "default": false,
      "description": "Pr\u00eat de mat\u00e9riel"
    },
    "equipment_returned": {
      "type": "boolean",
      "default": false,
      "description": "Mat\u00e9riel restitu\u00e9"
    }
  },
  "required": [
    "user_id",
    "menu_id",
    "num_persons",
    "delivery_address",
    "delivery_date"
  ]
}