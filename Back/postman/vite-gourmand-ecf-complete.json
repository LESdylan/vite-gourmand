{
  "info": {
    "_postman_id": "ecf-vitegourmand-2026",
    "name": "üçΩÔ∏è ViteGourmand - ECF Complete Test Suite",
    "description": "Collection compl√®te de tests pour l'ECF ViteGourmand.\n\nCette collection centralise TOUS les tests du projet:\n- Tests d'authentification\n- Tests de validation\n- Tests des r√®gles m√©tier\n- Tests de s√©curit√©\n- Tests CRUD API\n- Tests de gestion d'erreurs\n- Tests RGPD\n- Tests de performance\n\n**167 tests au total** couvrant l'int√©gralit√© des exigences ECF.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api"
    },
    {
      "key": "adminEmail",
      "value": "jose@vitegourmand.fr"
    },
    {
      "key": "adminPassword",
      "value": "Admin123!"
    },
    {
      "key": "managerEmail",
      "value": "pierre@vitegourmand.fr"
    },
    {
      "key": "managerPassword",
      "value": "Manager123!"
    },
    {
      "key": "clientEmail",
      "value": "alice@example.fr"
    },
    {
      "key": "clientPassword",
      "value": "Client123!"
    },
    {
      "key": "adminToken",
      "value": ""
    },
    {
      "key": "managerToken",
      "value": ""
    },
    {
      "key": "clientToken",
      "value": ""
    },
    {
      "key": "testUserEmail",
      "value": ""
    },
    {
      "key": "testUserId",
      "value": ""
    },
    {
      "key": "testUserToken",
      "value": ""
    },
    {
      "key": "testOrderId",
      "value": ""
    },
    {
      "key": "testMenuId",
      "value": ""
    }
  ],
  "item": [
    {
      "name": "üîß 0. Setup - Initialisation",
      "description": "Connexion des utilisateurs de test et r√©cup√©ration des tokens",
      "item": [
        {
          "name": "0.1 Login Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const res = pm.response.json();",
                  "if (res.data && res.data.accessToken) {",
                  "  pm.collectionVariables.set('adminToken', res.data.accessToken);",
                  "}",
                  "",
                  "pm.test('0.1 Admin login successful', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    pm.expect(res.success).to.be.true;",
                  "    pm.expect(res.data.accessToken).to.be.a('string');",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"{{adminEmail}}\", \"password\": \"{{adminPassword}}\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          }
        },
        {
          "name": "0.2 Login Manager",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const res = pm.response.json();",
                  "if (res.data && res.data.accessToken) {",
                  "  pm.collectionVariables.set('managerToken', res.data.accessToken);",
                  "}",
                  "",
                  "pm.test('0.2 Manager login successful', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    pm.expect(res.success).to.be.true;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"{{managerEmail}}\", \"password\": \"{{managerPassword}}\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          }
        },
        {
          "name": "0.3 Login Client",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const res = pm.response.json();",
                  "if (res.data && res.data.accessToken) {",
                  "  pm.collectionVariables.set('clientToken', res.data.accessToken);",
                  "}",
                  "",
                  "pm.test('0.3 Client login successful', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    pm.expect(res.success).to.be.true;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"{{clientEmail}}\", \"password\": \"{{clientPassword}}\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üîê 1. Authentification",
      "description": "Tests complets d'authentification (register, login, token, refresh)",
      "item": [
        {
          "name": "1.1 Register - New user success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const res = pm.response.json();",
                  "if (res.data && res.data.user) {",
                  "  pm.collectionVariables.set('testUserEmail', res.data.user.email);",
                  "  pm.collectionVariables.set('testUserId', res.data.user.id);",
                  "  pm.collectionVariables.set('testUserToken', res.data.accessToken);",
                  "}",
                  "",
                  "pm.test('1.1 Register new user returns 201', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([201, 429]);",
                  "  if (pm.response.code === 201) {",
                  "    pm.expect(res.success).to.be.true;",
                  "    pm.expect(res.data).to.have.property('accessToken');",
                  "    pm.expect(res.data.user).to.have.property('id');",
                  "    pm.expect(res.data.user).to.have.property('email');",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const timestamp = Date.now();",
                  "pm.collectionVariables.set('testUserEmail', `test-${timestamp}@example.com`);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"{{testUserEmail}}\", \"password\": \"SecurePassword123!\", \"firstName\": \"Test User\", \"gdprConsent\": true}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          }
        },
        {
          "name": "1.2 Register - Invalid email rejected",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('1.2 Invalid email rejected with 400', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 429]);",
                  "  if (pm.response.code === 400) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.false;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"invalid-email\", \"password\": \"SecurePassword123!\", \"firstName\": \"Test\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          }
        },
        {
          "name": "1.3 Register - Short password rejected",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('1.3 Short password rejected with 400', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 429]);",
                  "  if (pm.response.code === 400) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.false;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"short@example.com\", \"password\": \"123\", \"firstName\": \"Test\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          }
        },
        {
          "name": "1.4 Register - Missing fields rejected",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('1.4 Missing fields rejected with 400', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 429]);",
                  "  if (pm.response.code === 400) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.false;",
                  "    pm.expect(res.error).to.equal('Validation failed');",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          }
        },
        {
          "name": "1.5 Register - Extra fields rejected (whitelist)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('1.5 Extra fields rejected (whitelist security)', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 429]);",
                  "  if (pm.response.code === 400) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.false;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"test@example.com\", \"password\": \"SecurePassword123!\", \"firstName\": \"Test\", \"hackerField\": \"malicious\", \"gdprConsent\": true}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          }
        },
        {
          "name": "1.6 Login - Valid credentials",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('1.6 Login with valid credentials returns 200', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "    pm.expect(res.data).to.have.property('accessToken');",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"{{clientEmail}}\", \"password\": \"{{clientPassword}}\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          }
        },
        {
          "name": "1.7 Login - Wrong password rejected",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('1.7 Wrong password rejected with 401 or 429', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([401, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"{{clientEmail}}\", \"password\": \"WrongPassword!\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          }
        },
        {
          "name": "1.8 Login - Non-existent user rejected",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('1.8 Non-existent user rejected', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([401, 404, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"nonexistent@example.com\", \"password\": \"Password123!\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          }
        },
        {
          "name": "1.9 Me - Without token rejected",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('1.9 Access without token returns 401', function() {",
                  "  pm.expect(pm.response.code).to.equal(401);",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.success).to.be.false;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "me"
              ]
            }
          }
        },
        {
          "name": "1.10 Me - Invalid token rejected",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('1.10 Invalid token returns 401', function() {",
                  "  pm.expect(pm.response.code).to.equal(401);",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.success).to.be.false;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer invalid.token.here"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "me"
              ]
            }
          }
        },
        {
          "name": "1.11 Me - Valid token success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('1.11 Valid token returns user profile', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 401, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "    pm.expect(res.data).to.have.property('email');",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{clientToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "me"
              ]
            }
          }
        },
        {
          "name": "1.12 Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('1.12 Refresh token returns new access token', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 400, 401, 404, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.data).to.have.property('accessToken');",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"refreshToken\": \"dummy-refresh-token\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "refresh"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üîí 2. S√©curit√© & R√¥les",
      "description": "Tests de s√©curit√©: guards, r√¥les, autorisations",
      "item": [
        {
          "name": "2.1 Client cannot access admin routes",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('2.1 Client rejected on admin route (403 or 401)', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([401, 403]);",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.success).to.be.false;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{clientToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "admin",
                "users"
              ]
            }
          }
        },
        {
          "name": "2.2 Admin can access admin routes",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('2.2 Admin can access /admin/users', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 401, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "admin",
                "users"
              ]
            }
          }
        },
        {
          "name": "2.3 Admin can access roles",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('2.3 Admin can access /admin/roles', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 401, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/roles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "admin",
                "roles"
              ]
            }
          }
        },
        {
          "name": "2.4 Admin can access stats",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('2.4 Admin can access /admin/stats', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 401, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/stats",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "admin",
                "stats"
              ]
            }
          }
        },
        {
          "name": "2.5 Visitor cannot create order",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('2.5 Visitor cannot create order (401)', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([401, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"personNumber\": 10, \"prestationDate\": \"2026-03-01\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders"
              ]
            }
          }
        },
        {
          "name": "2.6 Errors don't expose stack traces",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('2.6 Error response does not expose stack trace', function() {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.stack).to.be.undefined;",
                  "  pm.expect(res.trace).to.be.undefined;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          }
        },
        {
          "name": "2.7 Errors don't expose internal values",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('2.7 Error response does not expose internal values', function() {",
                  "  const res = pm.response.json();",
                  "  pm.expect(res.target).to.be.undefined;",
                  "  pm.expect(res.value).to.be.undefined;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"invalid\", \"password\": \"123\", \"firstName\": \"A\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üìã 3. R√®gles M√©tier - Commandes",
      "description": "Tests des r√®gles de gestion m√©tier pour les commandes",
      "item": [
        {
          "name": "3.1 Client can view own orders",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('3.1 Client can view their orders', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 401, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "    pm.expect(res.data).to.exist;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{clientToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders"
              ]
            }
          }
        },
        {
          "name": "3.2 Admin can view all orders",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('3.2 Admin can view all orders', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 401, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders"
              ]
            }
          }
        },
        {
          "name": "3.3 Order rejected if personNumber = 0",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('3.3 Order with personNumber=0 rejected', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 401, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{clientToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"personNumber\": 0, \"prestationDate\": \"2026-03-01\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders"
              ]
            }
          }
        },
        {
          "name": "3.4 Order rejected if personNumber negative",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('3.4 Order with negative personNumber rejected', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 401, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{clientToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"personNumber\": -5, \"prestationDate\": \"2026-03-01\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders"
              ]
            }
          }
        },
        {
          "name": "3.5 Order creation requires auth",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('3.5 Order creation requires authentication', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 401, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"personNumber\": 10, \"prestationDate\": \"2026-03-01\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üåê 4. API CRUD - Endpoints",
      "description": "Tests fonctionnels de tous les endpoints CRUD",
      "item": [
        {
          "name": "4.1 GET /menus - List all menus",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('4.1 GET /menus returns 200', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "    pm.expect(res.data).to.exist;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/menus",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "menus"
              ]
            }
          }
        },
        {
          "name": "4.2 GET /menus/:id - Get single menu",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('4.2 GET /menus/:id returns menu or 404', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 404, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.data).to.have.property('title');",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/menus/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "menus",
                "1"
              ]
            }
          }
        },
        {
          "name": "4.3 GET /dishes - List all dishes",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('4.3 GET /dishes returns 200', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/dishes",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "dishes"
              ]
            }
          }
        },
        {
          "name": "4.4 GET /allergens - List all allergens",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('4.4 GET /allergens returns 200', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "    pm.expect(res.data).to.be.an('array');",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/allergens",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "allergens"
              ]
            }
          }
        },
        {
          "name": "4.5 GET /diets - List all diets",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('4.5 GET /diets returns 200', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/diets",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "diets"
              ]
            }
          }
        },
        {
          "name": "4.6 GET /themes - List all themes",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('4.6 GET /themes returns 200', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/themes",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "themes"
              ]
            }
          }
        },
        {
          "name": "4.7 GET /working-hours - List working hours",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('4.7 GET /working-hours returns 200', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/working-hours",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "working-hours"
              ]
            }
          }
        },
        {
          "name": "4.8 GET /reviews - List all reviews",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('4.8 GET /reviews returns 200', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/reviews",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "reviews"
              ]
            }
          }
        },
        {
          "name": "4.9 GET /orders - List orders (auth)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('4.9 GET /orders returns 200 with auth', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 401, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{clientToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders"
              ]
            }
          }
        },
        {
          "name": "4.10 Non-existent endpoint returns 404",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('4.10 Non-existent endpoint returns 404', function() {",
                  "  pm.expect(pm.response.code).to.equal(404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/nonexistent-endpoint",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "nonexistent-endpoint"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "‚úÖ 5. Validation des Donn√©es",
      "description": "Tests de validation des entr√©es utilisateur",
      "item": [
        {
          "name": "5.1 Email format validation",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('5.1 Invalid email format rejected', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"not-an-email\", \"password\": \"Password123!\", \"firstName\": \"Test\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          }
        },
        {
          "name": "5.2 Password minimum length",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('5.2 Short password rejected', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"test@example.com\", \"password\": \"123\", \"firstName\": \"Test\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          }
        },
        {
          "name": "5.3 Required fields check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('5.3 Missing required fields rejected', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"test@example.com\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          }
        },
        {
          "name": "5.4 Empty body rejected",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('5.4 Empty body rejected', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          }
        },
        {
          "name": "5.5 Validation error messages clear",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('5.5 Validation error message is clear', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 429]);",
                  "  if (pm.response.code === 400) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.message).to.be.a('string');",
                  "    pm.expect(res.message.length).to.be.greaterThan(0);",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"invalid\", \"password\": \"123\", \"firstName\": \"A\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "‚ö†Ô∏è 6. Gestion des Erreurs",
      "description": "Tests de gestion des erreurs et format de r√©ponse",
      "item": [
        {
          "name": "6.1 Invalid JSON returns 400",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('6.1 Invalid JSON returns 400', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{ invalid json }"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          }
        },
        {
          "name": "6.2 Non-existent ID returns 404",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('6.2 Non-existent ID returns 404', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([404, 429]);",
                  "  if (pm.response.code === 404) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.false;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/menus/999999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "menus",
                "999999"
              ]
            }
          }
        },
        {
          "name": "6.3 Unsupported method handled",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('6.3 Unsupported method handled', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([404, 405, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          }
        },
        {
          "name": "6.4 401 error format consistent",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('6.4 401 error format consistent', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([401, 429]);",
                  "  const res = pm.response.json();",
                  "  pm.expect(res).to.have.property('success', false);",
                  "  if (pm.response.code === 401) {",
                  "    pm.expect(res).to.have.property('statusCode', 401);",
                  "  }",
                  "  pm.expect(res).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "me"
              ]
            }
          }
        },
        {
          "name": "6.5 400 error format consistent",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('6.5 400 error format consistent', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 429]);",
                  "  if (pm.response.code === 400) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res).to.have.property('success', false);",
                  "    pm.expect(res).to.have.property('statusCode', 400);",
                  "    pm.expect(res).to.have.property('timestamp');",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          }
        },
        {
          "name": "6.6 404 error format consistent",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('6.6 404 error format consistent', function() {",
                  "  pm.expect(pm.response.code).to.equal(404);",
                  "  const res = pm.response.json();",
                  "  pm.expect(res).to.have.property('success', false);",
                  "  pm.expect(res).to.have.property('statusCode', 404);",
                  "  pm.expect(res).to.have.property('timestamp');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/nonexistent-route",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "nonexistent-route"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üì§ 7. Format des R√©ponses",
      "description": "Tests du format de r√©ponse API standardis√©",
      "item": [
        {
          "name": "7.1 Success response format",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('7.1 Success response has standard format', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res).to.have.property('success', true);",
                  "    pm.expect(res).to.have.property('statusCode', 200);",
                  "    pm.expect(res).to.have.property('data');",
                  "    pm.expect(res).to.have.property('timestamp');",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/menus",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "menus"
              ]
            }
          }
        },
        {
          "name": "7.2 Response includes path",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('7.2 Response includes path', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res).to.have.property('path');",
                  "    pm.expect(res.path).to.contain('/api/');",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/allergens",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "allergens"
              ]
            }
          }
        },
        {
          "name": "7.3 201 Created format",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const timestamp = Date.now();",
                  "pm.collectionVariables.set('tempEmail', `format-test-${timestamp}@example.com`);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('7.3 201 Created has proper format', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([201, 429]);",
                  "  if (pm.response.code === 201) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res).to.have.property('success', true);",
                  "    pm.expect(res).to.have.property('statusCode', 201);",
                  "    pm.expect(res).to.have.property('message');",
                  "    pm.expect(res).to.have.property('data');",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"{{tempEmail}}\", \"password\": \"SecurePassword123!\", \"firstName\": \"Format Test\", \"gdprConsent\": true}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üîë 8. Password Reset Flow",
      "description": "Tests du flux de r√©initialisation de mot de passe",
      "item": [
        {
          "name": "8.1 Forgot password - valid email",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('8.1 Forgot password accepts valid email', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.data.message).to.match(/reset|email|link|sent/i);",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"{{clientEmail}}\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/forgot-password",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "forgot-password"
              ]
            }
          }
        },
        {
          "name": "8.2 Forgot password - non-existent email",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('8.2 Forgot password with non-existent email (security)', function() {",
                  "  // Should still return 200 for security (don't reveal user existence)",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 404, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"nonexistent@example.com\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/forgot-password",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "forgot-password"
              ]
            }
          }
        },
        {
          "name": "8.3 Change password - requires auth",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('8.3 Change password requires authentication', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([401, 404, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"currentPassword\": \"old\", \"newPassword\": \"new\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/change-password",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "change-password"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üõ°Ô∏è 9. RGPD Compliance",
      "description": "Tests de conformit√© RGPD (export donn√©es, suppression)",
      "item": [
        {
          "name": "9.1 Export user data",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('9.1 User can export their data', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 401, 404, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{clientToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users/me/export",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "me",
                "export"
              ]
            }
          }
        },
        {
          "name": "9.2 View profile (data access)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('9.2 User can access their profile', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.success).to.be.true;",
                  "    pm.expect(res.data).to.have.property('email');",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{clientToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "me"
              ]
            }
          }
        },
        {
          "name": "9.3 Export requires authentication",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('9.3 Export requires authentication', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([401, 404, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/users/me/export",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "me",
                "export"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üèÉ 10. User Journey Flow",
      "description": "Test du parcours utilisateur complet",
      "item": [
        {
          "name": "10.1 Flow: Register new user",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const timestamp = Date.now();",
                  "pm.collectionVariables.set('flowUserEmail', `flow-user-${timestamp}@example.com`);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const res = pm.response.json();",
                  "if (res.data && res.data.accessToken) {",
                  "  pm.collectionVariables.set('flowUserToken', res.data.accessToken);",
                  "  pm.collectionVariables.set('flowUserId', res.data.user.id);",
                  "}",
                  "",
                  "pm.test('10.1 Flow: User registration succeeds', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([201, 429]);",
                  "  if (pm.response.code === 201) {",
                  "    pm.expect(res.success).to.be.true;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"{{flowUserEmail}}\", \"password\": \"FlowTest123!\", \"firstName\": \"Flow User\", \"gdprConsent\": true}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          }
        },
        {
          "name": "10.2 Flow: Login with new account",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const res = pm.response.json();",
                  "if (res.data && res.data.accessToken) {",
                  "  pm.collectionVariables.set('flowUserToken', res.data.accessToken);",
                  "}",
                  "",
                  "pm.test('10.2 Flow: User login succeeds', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 401, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"{{flowUserEmail}}\", \"password\": \"FlowTest123!\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          }
        },
        {
          "name": "10.3 Flow: View profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('10.3 Flow: User can view profile', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.data.email).to.contain('flow-user');",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{flowUserToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "me"
              ]
            }
          }
        },
        {
          "name": "10.4 Flow: Browse menus",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('10.4 Flow: User can browse menus', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res.data).to.exist;",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/menus",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "menus"
              ]
            }
          }
        },
        {
          "name": "10.5 Flow: View allergens",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('10.5 Flow: User can view allergens', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/allergens",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "allergens"
              ]
            }
          }
        },
        {
          "name": "10.6 Flow: Check own orders",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('10.6 Flow: User can check orders', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "  if (pm.response.code === 200) {",
                  "    const res = pm.response.json();",
                  "    // Support both array and paginated formats",
                  "    if (res.data.items) {",
                  "      pm.expect(res.data.items).to.be.an('array');",
                  "    } else {",
                  "      pm.expect(res.data).to.be.an('array');",
                  "    }",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{flowUserToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "orders"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üîß 11. Guards & Filters (Unit Test Equivalents)",
      "description": "Tests √©quivalents aux tests unitaires Jest pour Guards et Filters",
      "item": [
        {
          "name": "11.1 JwtAuthGuard - Public routes accessible",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('11.1 Public routes accessible without token', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/menus",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "menus"
              ]
            }
          }
        },
        {
          "name": "11.2 JwtAuthGuard - Protected routes require token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('11.2 Protected routes require token', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([401, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "me"
              ]
            }
          }
        },
        {
          "name": "11.3 RolesGuard - Allows matching role",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('11.3 RolesGuard allows matching role (admin)', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([200, 401, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/stats",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "admin",
                "stats"
              ]
            }
          }
        },
        {
          "name": "11.4 RolesGuard - Denies wrong role",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('11.4 RolesGuard denies wrong role', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([401, 403, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{clientToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/stats",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "admin",
                "stats"
              ]
            }
          }
        },
        {
          "name": "11.5 HttpExceptionFilter - Format check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('11.5 HttpExceptionFilter returns proper format', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 429]);",
                  "  if (pm.response.code === 400) {",
                  "    const res = pm.response.json();",
                  "    pm.expect(res).to.have.property('success', false);",
                  "    pm.expect(res).to.have.property('statusCode', 400);",
                  "    pm.expect(res).to.have.property('path');",
                  "    pm.expect(res).to.have.property('timestamp');",
                  "  }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"invalid\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          }
        },
        {
          "name": "11.6 ValidationPipe - Rejects invalid data",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('11.6 ValidationPipe rejects invalid data', function() {",
                  "  pm.expect(pm.response.code).to.be.oneOf([400, 429]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"not-valid\", \"password\": \"x\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "‚è±Ô∏è 12. Performance & Rate Limiting",
      "description": "Tests de performance et rate limiting",
      "item": [
        {
          "name": "12.1 Rate limiting active",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('12.1 API responds within acceptable time', function() {",
                  "  pm.expect(pm.response.responseTime).to.be.below(5000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/menus",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "menus"
              ]
            }
          }
        },
        {
          "name": "12.2 Response time check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('12.2 Response time is acceptable', function() {",
                  "  pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/allergens",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "allergens"
              ]
            }
          }
        }
      ]
    }
  ]
}